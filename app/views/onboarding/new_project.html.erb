<% content_for :page_title do %>
  New Project
<% end %>

<!-- Page Header -->
<div class="mb-8">
  <div>
    <h1 class="text-2xl font-bold text-gray-900">Create Your First Project</h1>
    <p class="text-gray-600 mt-1">Set up monitoring for your Rails application</p>
  </div>
</div>

<!-- Main Content -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
  <!-- Form Section -->
  <div class="lg:col-span-2">
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-lg font-medium text-gray-900 mb-6">Project Details</h2>

      <%= form_with model: @project, url: onboarding_create_project_path, local: true, class: "space-y-6" do |form| %>

        <!-- Project Name -->
        <div>
          <%= form.label :name, "Project Name", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_field :name,
              placeholder: "My Rails App",
              class: "appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
          <% if @project.errors[:name].any? %>
            <p class="mt-1 text-sm text-red-600"><%= @project.errors[:name].first %></p>
          <% end %>
        </div>

        <!-- Project URL -->
        <div>
          <%= form.label :url, "Application URL", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.url_field :url,
              placeholder: "https://myapp.com",
              class: "appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
          <p class="mt-1 text-xs text-gray-500">The URL where your Rails application is hosted</p>
          <% if @project.errors[:url].any? %>
            <p class="mt-1 text-sm text-red-600"><%= @project.errors[:url].first %></p>
          <% end %>
        </div>

        <!-- Project Description (Optional) -->
        <div>
          <%= form.label :description, "Description (Optional)", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_area :description,
              rows: 3,
              placeholder: "Brief description of your project...",
              class: "appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" %>
        </div>

        <!-- Tech Stack Selection -->
        <div data-controller="onboarding-tech-stack">
          <%= form.label :tech_stack, "Tech Stack", class: "block text-sm font-medium text-gray-700 mb-3" %>
          <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-6" data-onboarding-tech-stack-target="option">
            <% tech_stacks = [
              { name: 'Ruby on Rails', icon: 'üíé', value: 'rails' },
              { name: 'Node.js', icon: 'üü¢', value: 'nodejs' },
              { name: 'React', icon: '‚öõÔ∏è', value: 'react' },
              { name: 'Vue.js', icon: 'üíö', value: 'vue' },
              { name: 'Django', icon: 'üêç', value: 'django' },
              { name: 'Laravel', icon: 'üî∂', value: 'laravel' },
              { name: 'Express.js', icon: 'üöÄ', value: 'express' },
              { name: 'Next.js', icon: '‚ñ≤', value: 'nextjs' },
              { name: 'Nuxt.js', icon: 'üíô', value: 'nuxt' },
              { name: 'Flask', icon: 'üå∂Ô∏è', value: 'flask' },
              { name: 'Spring Boot', icon: 'üçÉ', value: 'spring' },
              { name: 'Other', icon: '‚öôÔ∏è', value: 'other' }
            ] %>

            <% tech_stacks.each do |stack| %>
              <label class="tech-stack-option relative flex cursor-pointer rounded-xl bg-white p-6 shadow-md border border-gray-100 focus:outline-none hover:shadow-lg hover:scale-105 transition-all duration-200">
                <%= form.radio_button :tech_stack, stack[:value],
                    class: "sr-only",
                    required: true,
                    data: { action: "change->onboarding-tech-stack#select" } %>
                <div class="flex flex-col items-center text-center w-full relative z-10">
                  <span class="text-3xl mb-3 filter drop-shadow-sm"><%= stack[:icon] %></span>
                  <span class="text-sm font-semibold text-gray-700 leading-tight"><%= stack[:name] %></span>
                </div>
                <div class="tech-stack-indicator absolute -inset-px rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 opacity-0 pointer-events-none transition-opacity duration-200"></div>
                <div class="tech-stack-overlay absolute inset-0 rounded-xl pointer-events-none"></div>
              </label>
            <% end %>
          </div>
          <p class="mt-2 text-xs text-gray-500">Select the primary technology stack for this project</p>
          <% if @project.errors[:tech_stack].any? %>
            <p class="mt-1 text-sm text-red-600"><%= @project.errors[:tech_stack].first %></p>
          <% end %>

          <div data-onboarding-tech-stack-target="message" class="hidden mt-3 p-3 rounded-md bg-yellow-50 border border-yellow-200 text-xs text-yellow-800">
            Support for this stack is coming soon. Today, ActiveRabbit works best with Ruby on Rails.
          </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center justify-between pt-6 border-t border-gray-200">
          <%= link_to onboarding_welcome_path,
              class: "text-sm text-gray-500 hover:text-gray-700" do %>
            ‚Üê Back to welcome
          <% end %>

          <%= form.submit "Create Project & Get Started",
              class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
        </div>
      <% end %>
    </div>
  </div>


</div>
